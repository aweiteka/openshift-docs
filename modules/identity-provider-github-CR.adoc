// Module included in the following assemblies:
//
// * authentication/identity_providers/configuring-github-identity-provider.adoc

[id='identity-provider-github-CR-{context}']
= Sample GitHub CR

The following Custom Resource (CR) shows the parameters and acceptable values for a
GitHub identity provider.

.GitHub CR

[source,yaml]
----
apiVersion: config.openshift.io/v1
kind: OAuth
metadata:
  name: cluster <1>
spec:
  identityProviders:
  - name: githubidp <2>
    challenge: false <3>
    login: true <4>
    mappingMethod: claim <5>
    type: GitHub
    github:
      ca: <6>
        name: ca-config-map
      clientID: {...} <7>
      clientSecret: <8>
        name: github-secret
      hostname: ... <9>
      organizations: <10>
      - myorganization1
      - myorganization2
      teams: <11>
      - myorganization1/team-a
      - myorganization2/child-team-b
----
<1> The CR must be named 'cluster'.
<2> This provider name is prefixed to the GitHub numeric user ID to form an
identity name. It is also used to build the callback URL.
<3> `GitHubIdentityProvider` cannot be used to send `WWW-Authenticate`
challenges.
<4> When `true`, unauthenticated token requests from web clients, like the web
console, are redirected to GitHub to log in.
<5> Controls how mappings are established between this provider's identities and user objects.
<6> Optional: Reference to a {product-title} ConfigMap containing the
PEM-encoded certificate authority bundle to use in validating server
certificates for the configured URL. Only for use in GitHub Enterprise.
<7> The client ID of a
link:https://github.com/settings/applications/new[registered GitHub OAuth
application]. The application must be configured with a callback URL of
`<authenticationServiceUrl>/oauth2callback/<identityProviderName>`.
<8> Reference to an {product-title} Secret containing the client secret
issued by GitHub.
<9> For GitHub Enterprise, you must provide the host name of your instance, such as
`example.com`. This value must match the GitHub Enterprise `hostname` value in
in the *_/setup/settings_* file and cannot include a port number. For GitHub,
omit this parameter.
<10> Optional list of organizations. If specified, only GitHub users that are members of
at least one of the listed organizations will be allowed to log in. If the GitHub OAuth
application configured in `clientID` is not owned by the organization, an organization
owner must grant third-party access in order to use this option. This can be done during
the first GitHub login by the organization's administrator, or from the GitHub organization settings.
Cannot be used in combination with the `teams` field.
<11> Optional list of teams in the format of `<organization>/<team>`. If specified, only GitHub users that are members of
at least one of the listed teams will be allowed to log in. If the GitHub OAuth
application configured in `clientID` is not owned by the team's organization, an organization
owner must grant third-party access in order to use this option. This can be done during
the first GitHub login by the organization's administrator, or from the GitHub organization settings.
Parent teams do not include child team members by default so parent and child teams must be listed separately.
Cannot be used in combination with the `organizations` field.
